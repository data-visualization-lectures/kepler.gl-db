"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.aiAssistantReducer = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _reduxActions = require("redux-actions");
var _actions = require("../actions");
var _models = require("../config/models");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// Initial state for the reducer
var initialConfig = {
  isReady: false,
  provider: 'openai',
  model: 'gpt-4o',
  apiKey: '',
  baseUrl: _models.PROVIDER_DEFAULT_BASE_URLS['openai'],
  temperature: 0.0,
  topP: 1.0
};
var initialState = {
  config: initialConfig,
  messages: [],
  screenshotToAsk: {
    startScreenCapture: false,
    screenCaptured: ''
  }
};
var aiAssistantReducer = exports.aiAssistantReducer = (0, _reduxActions.handleActions)((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])({}, _actions.UPDATE_AI_ASSISTANT_CONFIG, updateAiAssistantConfigHandler), _actions.UPDATE_AI_ASSISTANT_MESSAGES, updateAiAssistantMessagesHandler), _actions.SET_START_SCREEN_CAPTURE, setStartScreenCaptureHandler), _actions.SET_SCREEN_CAPTURED, setScreenCapturedHandler), _actions.SET_MAP_BOUNDARY, setMapBoundaryHandler), initialState);
function updateAiAssistantConfigHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    config: _objectSpread(_objectSpread({}, state.config), action.payload)
  });
}
function updateAiAssistantMessagesHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    messages: action.payload
  });
}
function setStartScreenCaptureHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    screenshotToAsk: {
      startScreenCapture: action.payload,
      screenCaptured: ''
    }
  });
}
function setScreenCapturedHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    screenshotToAsk: _objectSpread(_objectSpread({}, state.screenshotToAsk), {}, {
      screenCaptured: action.payload
    })
  });
}
function setMapBoundaryHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    keplerGl: _objectSpread(_objectSpread({}, state.keplerGl), {}, {
      mapBoundary: action.payload
    })
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkdXhBY3Rpb25zIiwicmVxdWlyZSIsIl9hY3Rpb25zIiwiX21vZGVscyIsIm93bktleXMiLCJlIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlZmluZVByb3BlcnR5IiwiaW5pdGlhbENvbmZpZyIsImlzUmVhZHkiLCJwcm92aWRlciIsIm1vZGVsIiwiYXBpS2V5IiwiYmFzZVVybCIsIlBST1ZJREVSX0RFRkFVTFRfQkFTRV9VUkxTIiwidGVtcGVyYXR1cmUiLCJ0b3BQIiwiaW5pdGlhbFN0YXRlIiwiY29uZmlnIiwibWVzc2FnZXMiLCJzY3JlZW5zaG90VG9Bc2siLCJzdGFydFNjcmVlbkNhcHR1cmUiLCJzY3JlZW5DYXB0dXJlZCIsImFpQXNzaXN0YW50UmVkdWNlciIsImV4cG9ydHMiLCJoYW5kbGVBY3Rpb25zIiwiVVBEQVRFX0FJX0FTU0lTVEFOVF9DT05GSUciLCJ1cGRhdGVBaUFzc2lzdGFudENvbmZpZ0hhbmRsZXIiLCJVUERBVEVfQUlfQVNTSVNUQU5UX01FU1NBR0VTIiwidXBkYXRlQWlBc3Npc3RhbnRNZXNzYWdlc0hhbmRsZXIiLCJTRVRfU1RBUlRfU0NSRUVOX0NBUFRVUkUiLCJzZXRTdGFydFNjcmVlbkNhcHR1cmVIYW5kbGVyIiwiU0VUX1NDUkVFTl9DQVBUVVJFRCIsInNldFNjcmVlbkNhcHR1cmVkSGFuZGxlciIsIlNFVF9NQVBfQk9VTkRBUlkiLCJzZXRNYXBCb3VuZGFyeUhhbmRsZXIiLCJzdGF0ZSIsImFjdGlvbiIsInBheWxvYWQiLCJrZXBsZXJHbCIsIm1hcEJvdW5kYXJ5Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2FpLWFzc2lzdGFudC9zcmMvcmVkdWNlcnMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IHtBY3Rpb24sIGhhbmRsZUFjdGlvbnN9IGZyb20gJ3JlZHV4LWFjdGlvbnMnO1xuaW1wb3J0IHtcbiAgVVBEQVRFX0FJX0FTU0lTVEFOVF9DT05GSUcsXG4gIFVQREFURV9BSV9BU1NJU1RBTlRfTUVTU0FHRVMsXG4gIFNFVF9TVEFSVF9TQ1JFRU5fQ0FQVFVSRSxcbiAgU0VUX1NDUkVFTl9DQVBUVVJFRCxcbiAgU0VUX01BUF9CT1VOREFSWVxufSBmcm9tICcuLi9hY3Rpb25zJztcbmltcG9ydCB7TWVzc2FnZU1vZGVsfSBmcm9tICdAb3BlbmFzc2lzdGFudC9jb3JlJztcbmltcG9ydCB7UFJPVklERVJfREVGQVVMVF9CQVNFX1VSTFN9IGZyb20gJy4uL2NvbmZpZy9tb2RlbHMnO1xuXG5leHBvcnQgdHlwZSBBaUFzc2lzdGFudENvbmZpZyA9IHtcbiAgaXNSZWFkeTogYm9vbGVhbjtcbiAgcHJvdmlkZXI6IHN0cmluZztcbiAgbW9kZWw6IHN0cmluZztcbiAgYXBpS2V5OiBzdHJpbmc7XG4gIGJhc2VVcmw/OiBzdHJpbmc7XG4gIHRlbXBlcmF0dXJlOiBudW1iZXI7XG4gIHRvcFA6IG51bWJlcjtcbiAgbWFwYm94VG9rZW4/OiBzdHJpbmc7XG59O1xuXG4vLyBJbml0aWFsIHN0YXRlIGZvciB0aGUgcmVkdWNlclxuY29uc3QgaW5pdGlhbENvbmZpZzogQWlBc3Npc3RhbnRDb25maWcgPSB7XG4gIGlzUmVhZHk6IGZhbHNlLFxuICBwcm92aWRlcjogJ29wZW5haScsXG4gIG1vZGVsOiAnZ3B0LTRvJyxcbiAgYXBpS2V5OiAnJyxcbiAgYmFzZVVybDogUFJPVklERVJfREVGQVVMVF9CQVNFX1VSTFNbJ29wZW5haSddLFxuICB0ZW1wZXJhdHVyZTogMC4wLFxuICB0b3BQOiAxLjBcbn07XG5cbmV4cG9ydCB0eXBlIEFpQXNzaXN0YW50U3RhdGUgPSB7XG4gIGNvbmZpZzogQWlBc3Npc3RhbnRDb25maWc7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlTW9kZWxbXTtcbiAgc2NyZWVuc2hvdFRvQXNrOiB7XG4gICAgc3RhcnRTY3JlZW5DYXB0dXJlOiBib29sZWFuO1xuICAgIHNjcmVlbkNhcHR1cmVkOiBzdHJpbmc7XG4gIH07XG4gIGtlcGxlckdsPzoge1xuICAgIG1hcEJvdW5kYXJ5Pzoge1xuICAgICAgbnc6IFtudW1iZXIsIG51bWJlcl07XG4gICAgICBzZTogW251bWJlciwgbnVtYmVyXTtcbiAgICB9O1xuICB9O1xufTtcblxuY29uc3QgaW5pdGlhbFN0YXRlOiBBaUFzc2lzdGFudFN0YXRlID0ge1xuICBjb25maWc6IGluaXRpYWxDb25maWcsXG4gIG1lc3NhZ2VzOiBbXSxcbiAgc2NyZWVuc2hvdFRvQXNrOiB7XG4gICAgc3RhcnRTY3JlZW5DYXB0dXJlOiBmYWxzZSxcbiAgICBzY3JlZW5DYXB0dXJlZDogJydcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFpQXNzaXN0YW50UmVkdWNlciA9IGhhbmRsZUFjdGlvbnM8QWlBc3Npc3RhbnRTdGF0ZSwgYW55PihcbiAge1xuICAgIFtVUERBVEVfQUlfQVNTSVNUQU5UX0NPTkZJR106IHVwZGF0ZUFpQXNzaXN0YW50Q29uZmlnSGFuZGxlcixcbiAgICBbVVBEQVRFX0FJX0FTU0lTVEFOVF9NRVNTQUdFU106IHVwZGF0ZUFpQXNzaXN0YW50TWVzc2FnZXNIYW5kbGVyLFxuICAgIFtTRVRfU1RBUlRfU0NSRUVOX0NBUFRVUkVdOiBzZXRTdGFydFNjcmVlbkNhcHR1cmVIYW5kbGVyLFxuICAgIFtTRVRfU0NSRUVOX0NBUFRVUkVEXTogc2V0U2NyZWVuQ2FwdHVyZWRIYW5kbGVyLFxuICAgIFtTRVRfTUFQX0JPVU5EQVJZXTogc2V0TWFwQm91bmRhcnlIYW5kbGVyXG4gIH0sXG4gIGluaXRpYWxTdGF0ZVxuKTtcblxuZnVuY3Rpb24gdXBkYXRlQWlBc3Npc3RhbnRDb25maWdIYW5kbGVyKFxuICBzdGF0ZTogQWlBc3Npc3RhbnRTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb248QWlBc3Npc3RhbnRDb25maWc+XG4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBjb25maWc6IHsuLi5zdGF0ZS5jb25maWcsIC4uLmFjdGlvbi5wYXlsb2FkfVxuICB9O1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBaUFzc2lzdGFudE1lc3NhZ2VzSGFuZGxlcihzdGF0ZTogQWlBc3Npc3RhbnRTdGF0ZSwgYWN0aW9uOiBBY3Rpb248TWVzc2FnZU1vZGVsW10+KSB7XG4gIHJldHVybiB7XG4gICAgLi4uc3RhdGUsXG4gICAgbWVzc2FnZXM6IGFjdGlvbi5wYXlsb2FkXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNldFN0YXJ0U2NyZWVuQ2FwdHVyZUhhbmRsZXIoc3RhdGU6IEFpQXNzaXN0YW50U3RhdGUsIGFjdGlvbjogQWN0aW9uPGJvb2xlYW4+KSB7XG4gIHJldHVybiB7XG4gICAgLi4uc3RhdGUsXG4gICAgc2NyZWVuc2hvdFRvQXNrOiB7c3RhcnRTY3JlZW5DYXB0dXJlOiBhY3Rpb24ucGF5bG9hZCwgc2NyZWVuQ2FwdHVyZWQ6ICcnfVxuICB9O1xufVxuXG5mdW5jdGlvbiBzZXRTY3JlZW5DYXB0dXJlZEhhbmRsZXIoc3RhdGU6IEFpQXNzaXN0YW50U3RhdGUsIGFjdGlvbjogQWN0aW9uPHN0cmluZz4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBzY3JlZW5zaG90VG9Bc2s6IHsuLi5zdGF0ZS5zY3JlZW5zaG90VG9Bc2ssIHNjcmVlbkNhcHR1cmVkOiBhY3Rpb24ucGF5bG9hZH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2V0TWFwQm91bmRhcnlIYW5kbGVyKFxuICBzdGF0ZTogQWlBc3Npc3RhbnRTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb248e253OiBbbnVtYmVyLCBudW1iZXJdOyBzZTogW251bWJlciwgbnVtYmVyXX0+XG4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBrZXBsZXJHbDoge1xuICAgICAgLi4uc3RhdGUua2VwbGVyR2wsXG4gICAgICBtYXBCb3VuZGFyeTogYWN0aW9uLnBheWxvYWRcbiAgICB9XG4gIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBR0EsSUFBQUEsYUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBUUEsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQTRELFNBQUFHLFFBQUFDLENBQUEsRUFBQUMsQ0FBQSxRQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBSixDQUFBLE9BQUFHLE1BQUEsQ0FBQUUscUJBQUEsUUFBQUMsQ0FBQSxHQUFBSCxNQUFBLENBQUFFLHFCQUFBLENBQUFMLENBQUEsR0FBQUMsQ0FBQSxLQUFBSyxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTixDQUFBLFdBQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFRLFVBQUEsT0FBQVAsQ0FBQSxDQUFBUSxJQUFBLENBQUFDLEtBQUEsQ0FBQVQsQ0FBQSxFQUFBSSxDQUFBLFlBQUFKLENBQUE7QUFBQSxTQUFBVSxjQUFBWixDQUFBLGFBQUFDLENBQUEsTUFBQUEsQ0FBQSxHQUFBWSxTQUFBLENBQUFDLE1BQUEsRUFBQWIsQ0FBQSxVQUFBQyxDQUFBLFdBQUFXLFNBQUEsQ0FBQVosQ0FBQSxJQUFBWSxTQUFBLENBQUFaLENBQUEsUUFBQUEsQ0FBQSxPQUFBRixPQUFBLENBQUFJLE1BQUEsQ0FBQUQsQ0FBQSxPQUFBYSxPQUFBLFdBQUFkLENBQUEsUUFBQWUsZ0JBQUEsYUFBQWhCLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLENBQUFELENBQUEsU0FBQUUsTUFBQSxDQUFBYyx5QkFBQSxHQUFBZCxNQUFB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