"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.OverwriteMapModal = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/yuichiyazaki/Library/CloudStorage/Dropbox/Projects_\u8B1B\u7FA9/c_DataVizLectures/_app_fork/kepler.gl-db/node_modules/react"));
var _styledComponents = _interopRequireDefault(require("/Users/yuichiyazaki/Library/CloudStorage/Dropbox/Projects_\u8B1B\u7FA9/c_DataVizLectures/_app_fork/kepler.gl-db/node_modules/styled-components"));
var _styledComponents2 = require("../common/styled-components");
var _statusPanel = require("./status-panel");
var _src = require("/Users/yuichiyazaki/Library/CloudStorage/Dropbox/Projects_\u8B1B\u7FA9/c_DataVizLectures/_app_fork/kepler.gl-db/src/localization/src");
var _imageModalContainer = _interopRequireDefault(require("./image-modal-container"));
var _useCloudListProvider2 = require("../hooks/use-cloud-list-provider");
var _modal = require("../common/modal");
var _templateObject, _templateObject2, _templateObject3, _templateObject4; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
var StyledMsg = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  margin-top: 24px;\n  font-size: 14px;\n"])));
var StyledTitle = _styledComponents["default"].span(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  font-weight: 600;\n  color: black;\n"])));
var StyledIcon = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-top: 24px;\n"])));
var StyledOverwriteMapModal = (0, _styledComponents["default"])(_styledComponents2.CenterVerticalFlexbox)(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  padding: 24px 12px;\n  min-height: 220px;\n"])));
var CONFIRM_BUTTON = {
  large: true,
  children: 'Yes',
  disabled: false
};
var OverwriteMapModalFactory = function OverwriteMapModalFactory() {
  /**
   * @type {React.FunctionComponent<OverwriteMapModalProps>}
   */
  var OverwriteMapModal = function OverwriteMapModal(_ref) {
    var mapSaved = _ref.mapSaved,
      title = _ref.title,
      isProviderLoading = _ref.isProviderLoading,
      onUpdateImageSetting = _ref.onUpdateImageSetting,
      cleanupExportImage = _ref.cleanupExportImage,
      onCancel = _ref.onCancel,
      onConfirm = _ref.onConfirm;
    var _useCloudListProvider = (0, _useCloudListProvider2.useCloudListProvider)(),
      provider = _useCloudListProvider.provider,
      cloudProviders = _useCloudListProvider.cloudProviders,
      setProvider = _useCloudListProvider.setProvider;
    (0, _react.useEffect)(function () {
      if (!provider && cloudProviders && cloudProviders.length > 0) {
        // Automatically Select the first provider if none selected
        // In a real scenario we might want to know which provider the map belongs to
        // But for standard overwrite, default to the first available (usually the main one)
        setProvider(cloudProviders[0]);
      }
    }, [provider, cloudProviders, setProvider]);
    var confirmButton = (0, _react.useMemo)(function () {
      return _objectSpread(_objectSpread({}, CONFIRM_BUTTON), {}, {
        // FORCE ENABLE: Ignore provider check to ensure button works.
        disabled: false
      });
    }, []);
    return /*#__PURE__*/_react["default"].createElement(_imageModalContainer["default"], {
      provider: provider,
      onUpdateImageSetting: onUpdateImageSetting,
      cleanupExportImage: cleanupExportImage
    }, /*#__PURE__*/_react["default"].createElement(StyledOverwriteMapModal, {
      className: "overwrite-map-modal"
    }, isProviderLoading ? /*#__PURE__*/_react["default"].createElement(StyledMsg, null, /*#__PURE__*/_react["default"].createElement(StyledTitle, null, /*#__PURE__*/_react["default"].createElement(_src.FormattedMessage, {
      id: 'modal.overwriteMap.title'
    })), /*#__PURE__*/_react["default"].createElement(_statusPanel.UploadAnimation, {
      icon: provider && provider.icon
    })) : /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(StyledIcon, null, provider && provider.icon ? /*#__PURE__*/_react["default"].createElement(provider.icon, {
      height: "64px"
    }) : null), /*#__PURE__*/_react["default"].createElement(StyledMsg, {
      className: "overwrite-map-msg"
    }, /*#__PURE__*/_react["default"].createElement(StyledTitle, null, title, " "), /*#__PURE__*/_react["default"].createElement(_src.FormattedMessage, {
      id: 'modal.overwriteMap.alreadyExists',
      values: {
        mapSaved: mapSaved
      }
    })))), /*#__PURE__*/_react["default"].createElement(_modal.ModalFooter, {
      cancel: onCancel,
      confirm: function confirm() {
        console.log('Core OverwriteMapModal: Confirm Clicked (Forced)', {
          provider: provider,
          cloudProviders: cloudProviders
        });
        // FORCE EXECUTION: If provider is set use it, otherwise use first available.
        var targetProvider = provider || cloudProviders && cloudProviders[0];
        if (targetProvider) {
          console.log('Core OverwriteMapModal: Executing onConfirm with', targetProvider);
          onConfirm(targetProvider);
        } else {
          console.error('Core OverwriteMapModal: FATAL - No providers available at all.');
        }
      },
      confirmButton: confirmButton
    }));
  };
  return OverwriteMapModal;
};
var OverwriteMapModal = exports.OverwriteMapModal = OverwriteMapModalFactory();
var _default = exports["default"] = OverwriteMapModalFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfc3R5bGVkQ29tcG9uZW50czIiLCJfc3RhdHVzUGFuZWwiLCJfc3JjIiwiX2ltYWdlTW9kYWxDb250YWluZXIiLCJfdXNlQ2xvdWRMaXN0UHJvdmlkZXIyIiwiX21vZGFsIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfdGVtcGxhdGVPYmplY3Q0IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0Iiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiU3R5bGVkTXNnIiwic3R5bGVkIiwiZGl2IiwiX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbDIiLCJTdHlsZWRUaXRsZSIsInNwYW4iLCJTdHlsZWRJY29uIiwiU3R5bGVkT3ZlcndyaXRlTWFwTW9kYWwiLCJDZW50ZXJWZXJ0aWNhbEZsZXhib3giLCJDT05GSVJNX0JVVFRPTiIsImxhcmdlIiwiY2hpbGRyZW4iLCJkaXNhYmxlZCIsIk92ZXJ3cml0ZU1hcE1vZGFsRmFjdG9yeSIsIk92ZXJ3cml0ZU1hcE1vZGFsIiwiX3JlZiIsIm1hcFNhdmVkIiwidGl0bGUiLCJpc1Byb3ZpZGVyTG9hZGluZyIsIm9uVXBkYXRlSW1hZ2VTZXR0aW5nIiwiY2xlYW51cEV4cG9ydEltYWdlIiwib25DYW5jZWwiLCJvbkNvbmZpcm0iLCJfdXNlQ2xvdWRMaXN0UHJvdmlkZXIiLCJ1c2VDbG91ZExpc3RQcm92aWRlciIsInByb3ZpZGVyIiwiY2xvdWRQcm92aWRlcnMiLCJzZXRQcm92aWRlciIsInVzZUVmZmVjdCIsImNvbmZpcm1CdXR0b24iLCJ1c2VNZW1vIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIkZvcm1hdHRlZE1lc3NhZ2UiLCJpZCIsIlVwbG9hZEFuaW1hdGlvbiIsImljb24iLCJGcmFnbWVudCIsImhlaWdodCIsInZhbHVlcyIsIk1vZGFsRm9vdGVyIiwiY2FuY2VsIiwiY29uZmlybSIsImNvbnNvbGUiLCJsb2ciLCJ0YXJnZXRQcm92aWRlciIsImVycm9yIiwiZXhwb3J0cyIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvc3JjL21vZGFscy9vdmVyd3JpdGUtbWFwLW1vZGFsLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBDZW50ZXJWZXJ0aWNhbEZsZXhib3ggfSBmcm9tICcuLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgVXBsb2FkQW5pbWF0aW9uIH0gZnJvbSAnLi9zdGF0dXMtcGFuZWwnO1xuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSB9IGZyb20gJ0BrZXBsZXIuZ2wvbG9jYWxpemF0aW9uJztcbmltcG9ydCBJbWFnZU1vZGFsQ29udGFpbmVyLCB7IEltYWdlTW9kYWxDb250YWluZXJQcm9wcyB9IGZyb20gJy4vaW1hZ2UtbW9kYWwtY29udGFpbmVyJztcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSAnQGtlcGxlci5nbC9jbG91ZC1wcm92aWRlcnMnO1xuaW1wb3J0IHsgY2xlYW51cEV4cG9ydEltYWdlIGFzIGNsZWFudXBFeHBvcnRJbWFnZUFjdGlvbiB9IGZyb20gJ0BrZXBsZXIuZ2wvYWN0aW9ucyc7XG5pbXBvcnQgeyB1c2VDbG91ZExpc3RQcm92aWRlciB9IGZyb20gJy4uL2hvb2tzL3VzZS1jbG91ZC1saXN0LXByb3ZpZGVyJztcbmltcG9ydCB7IE1vZGFsRm9vdGVyIH0gZnJvbSAnLi4vY29tbW9uL21vZGFsJztcblxuY29uc3QgU3R5bGVkTXNnID0gc3R5bGVkLmRpdmBcbiAgbWFyZ2luLXRvcDogMjRweDtcbiAgZm9udC1zaXplOiAxNHB4O1xuYDtcblxuY29uc3QgU3R5bGVkVGl0bGUgPSBzdHlsZWQuc3BhbmBcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6IGJsYWNrO1xuYDtcblxuY29uc3QgU3R5bGVkSWNvbiA9IHN0eWxlZC5kaXZgXG4gIG1hcmdpbi10b3A6IDI0cHg7XG5gO1xuXG5jb25zdCBTdHlsZWRPdmVyd3JpdGVNYXBNb2RhbCA9IHN0eWxlZChDZW50ZXJWZXJ0aWNhbEZsZXhib3gpYFxuICBwYWRkaW5nOiAyNHB4IDEycHg7XG4gIG1pbi1oZWlnaHQ6IDIyMHB4O1xuYDtcblxudHlwZSBPdmVyd3JpdGVNYXBNb2RhbFByb3BzID0ge1xuICBtYXBTYXZlZDogc3RyaW5nIHwgbnVsbDtcbiAgdGl0bGU6IHN0cmluZztcbiAgaXNQcm92aWRlckxvYWRpbmc6IGJvb2xlYW47XG5cbiAgLy8gY2FsbGJhY2tzXG4gIG9uVXBkYXRlSW1hZ2VTZXR0aW5nOiBJbWFnZU1vZGFsQ29udGFpbmVyUHJvcHNbJ29uVXBkYXRlSW1hZ2VTZXR0aW5nJ107XG4gIGNsZWFudXBFeHBvcnRJbWFnZTogdHlwZW9mIGNsZWFudXBFeHBvcnRJbWFnZUFjdGlvbjtcbiAgb25Db25maXJtOiAocHJvdmlkZXI6IFByb3ZpZGVyKSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKCkgPT4gdm9pZDtcbn07XG5cbmNvbnN0IENPTkZJUk1fQlVUVE9OID0ge1xuICBsYXJnZTogdHJ1ZSxcbiAgY2hpbGRyZW46ICdZZXMnLFxuICBkaXNhYmxlZDogZmFsc2Vcbn07XG5cbmNvbnN0IE92ZXJ3cml0ZU1hcE1vZGFsRmFjdG9yeSA9ICgpID0+IHtcbiAgLyoqXG4gICAqIEB0eXBlIHtSZWFjdC5GdW5jdGlvbkNvbXBvbmVudDxPdmVyd3JpdGVNYXBNb2RhbFByb3BzPn1cbiAgICovXG4gIGNvbnN0IE92ZXJ3cml0ZU1hcE1vZGFsOiBSZWFjdC5GQzxPdmVyd3JpdGVNYXBNb2RhbFByb3BzPiA9ICh7XG4gICAgbWFwU2F2ZWQsXG4gICAgdGl0bGUsXG4gICAgaXNQcm92aWRlckxvYWRpbmcsXG4gICAgb25VcGRhdGVJbWFnZVNldHRpbmcsXG4gICAgY2xlYW51cEV4cG9ydEltYWdlLFxuICAgIG9uQ2FuY2VsLFxuICAgIG9uQ29uZmlybVxuICB9KSA9PiB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgY2xvdWRQcm92aWRlcnMsIHNldFByb3ZpZGVyIH0gPSB1c2VDbG91ZExpc3RQcm92aWRlcigpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGlmICghcHJvdmlkZXIgJiYgY2xvdWRQcm92aWRlcnMgJiYgY2xvdWRQcm92aWRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBBdXRvbWF0aWNhbGx5IFNlbGVjdCB0aGUgZmlyc3QgcHJvdmlkZXIgaWYgbm9uZSBzZWxlY3RlZFxuICAgICAgICAvLyBJbiBhIHJlYWwgc2NlbmFyaW8gd2UgbWlnaHQgd2FudCB0byBrbm93IHdoaWNoIHByb3ZpZGVyIHRoZSBtYXAgYmVsb25ncyB0b1xuICAgICAgICAvLyBCdXQgZm9yIHN0YW5kYXJkIG92ZXJ3cml0ZSwgZGVmYXVsdCB0byB0aGUgZmlyc3QgYXZhaWxhYmxlICh1c3VhbGx5IHRoZSBtYWluIG9uZSlcbiAgICAgICAgc2V0UHJvdmlkZXIoY2xvdWRQcm92aWRlcnNbMF0pO1xuICAgICAgfVxuICAgIH0sIFtwcm92aWRlciwgY2xvdWRQcm92aWRlcnMsIHNldFByb3ZpZGVyXSk7XG5cbiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gdXNlTWVtbyhcbiAgICAgICgpID0+ICh7XG4gICAgICAgIC4uLkNPTkZJUk1fQlVUVE9OLFxuICAgICAgICAvLyBGT1JDRSBFTkFCTEU6IElnbm9yZSBwcm92aWRlciBjaGVjayB0byBlbnN1cmUgYnV0dG9uIHdvcmtzLlxuICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgIH0pLFxuICAgICAgW11cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxJbWFnZU1vZGFsQ29udGFpbmVyXG4gICAgICAgIHByb3ZpZGVyPXtwcm92aWRlcn1cbiAgICAgICAgb25VcGRhdGVJbWFnZVNldHRpbmc9e29uVXBkYXRlSW1hZ2VTZXR0aW5nfVxuICAgICAgICBjbGVhbnVwRXhwb3J0SW1hZ2U9e2NsZWFudXBFeHBvcnRJbWFnZX1cbiAgICAgID5cbiAgICAgICAgPFN0eWxlZE92ZXJ3cml0ZU1hcE1vZGFsIGNsYXNzTmFtZT1cIm92ZXJ3cml0ZS1tYXAtbW9kYWxcIj5cbiAgICAgICAgICB7aXNQcm92aWRlckxvYWRpbmcgPyAoXG4gICAgICAgICAgICA8U3R5bGVkTXNnPlxuICAgICAgICAgICAgICA8U3R5bGVkVGl0bGU+XG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9eydtb2RhbC5vdmVyd3JpdGVNYXAudGl0bGUnfSAvPlxuICAgICAgICAgICAgICA8L1N0eWxlZFRpdGxlPlxuICAgICAgICAgICAgICA8VXBsb2FkQW5pbWF0aW9uIGljb249e3Byb3ZpZGVyICYmIHByb3ZpZGVyLmljb259IC8+XG4gICAgICAgICAgICA8L1N0eWxlZE1zZz5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgPFN0eWxlZEljb24+XG4gICAgICAgICAgICAgICAge3Byb3ZpZGVyICYmIHByb3ZpZGVyLmljb24gPyA8cHJvdmlkZXIuaWNvbiBoZWlnaHQ9XCI2NHB4XCIgLz4gOiBudWxsfVxuICAgICAgICAgICAgICA8L1N0eWxlZEljb24+XG4gICAgICAgICAgICAgIDxTdHlsZWRNc2cgY2xhc3NOYW1lPVwib3ZlcndyaXRlLW1hcC1tc2dcIj5cbiAgICAgICAgICAgICAgICA8U3R5bGVkVGl0bGU+e3RpdGxlfSA8L1N0eWxlZFRpdGxlPlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPXsnbW9kYWwub3ZlcndyaXRlTWFwLmFscmVhZHlFeGlzdHMnfSB2YWx1ZXM9e3sgbWFwU2F2ZWQgfX0gLz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRNc2c+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICA8L1N0eWxlZE92ZXJ3cml0ZU1hcE1vZGFsPlxuICAgICAgICA8TW9kYWxGb290ZXJcbiAgICAgICAgICBjYW5jZWw9e29uQ2FuY2VsfVxuICAgICAgICAgIGNvbmZpcm09eygpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb3JlIE92ZXJ3cml0ZU1hcE1vZGFsOiBDb25maXJtIENsaWNrZWQgKEZvcmNlZCknLCB7IHByb3ZpZGVyLCBjbG91ZFByb3ZpZGVycyB9KTtcbiAgICAgICAgICAgIC8vIEZPUkNFIEVYRUNVVElPTjogSWYgcHJvdmlkZXIgaXMgc2V0IHVzZSBpdCwgb3RoZXJ3aXNlIHVzZSBmaXJzdCBhdmFpbGFibGUuXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRQcm92aWRlciA9IHByb3ZpZGVyIHx8IChjbG91ZFByb3ZpZGVycyAmJiBjbG91ZFByb3ZpZGVyc1swXSk7XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXRQcm92aWRlcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29yZSBPdmVyd3JpdGVNYXBNb2RhbDogRXhlY3V0aW5nIG9uQ29uZmlybSB3aXRoJywgdGFyZ2V0UHJvdmlkZXIpO1xuICAgICAgICAgICAgICBvbkNvbmZpcm0odGFyZ2V0UHJvdmlkZXIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ29yZSBPdmVyd3JpdGVNYXBNb2RhbDogRkFUQUwgLSBObyBwcm92aWRlcnMgYXZhaWxhYmxlIGF0IGFsbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAgIGNvbmZpcm1CdXR0b249e2NvbmZpcm1CdXR0b259XG4gICAgICAgIC8+XG4gICAgICA8L0ltYWdlTW9kYWxDb250YWluZXI+XG4gICAgKTtcbiAgfTtcbiAgcmV0dXJuIE92ZXJ3cml0ZU1hcE1vZGFsO1xufTtcblxuZXhwb3J0IGNvbnN0IE92ZXJ3cml0ZU1hcE1vZGFsID0gT3ZlcndyaXRlTWFwTW9kYWxGYWN0b3J5KCk7XG5leHBvcnQgZGVmYXVsdCBPdmVyd3JpdGVNYXBNb2RhbEZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxpQkFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsa0JBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLElBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLG9CQUFBLEdBQUFKLHNCQUFBLENBQUFGLE9BQUE7QUFHQSxJQUFBTyxzQkFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsTUFBQSxHQUFBUixPQUFBO0FBQThDLElBQUFTLGVBQUEsRUFBQUMsZ0JBQUEsRUFBQUMsZ0JBQUEsRUFBQUMsZ0JBQUEsRUFaOUM7QUFDQTtBQUFBLFNBQUFDLHlCQUFBQyxDQUFBLDZCQUFBQyxPQUFBLG1CQUFB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